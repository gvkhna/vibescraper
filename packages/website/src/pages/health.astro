---
import app from '@/server/index'
const response = await app.request('/api')

let healthStatus = { message: 'Server is not healthy' }

if (response.ok) {
  healthStatus = await response.json()
  // If the API responds with OK, update the health message accordingly.
} else {
  // Otherwise, you could choose to parse the error response
  // healthStatus = await response.json()
}

// Set the Astro page's status code to match the API response.
Astro.response.status = response.status
---

<!doctype html>
<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <title>Health Check</title>
  </head>
  <body>
    {/* <p>Server is healthy</p> */}
    <h1>{healthStatus.message}</h1>
  </body>
</html>
